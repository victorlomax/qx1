# qx1
FDC Simulator for Yamaha QX1

The QX1 is a MIDI sequencer released by Yamaha in 1984. 
It was the top line sequencer at this time (with 8 MIDI outs and 80,000 notes memory), with a rather high price tag.
One of the weakest point is the 5"1/4 floppy disk drive; slow, heavy and unreliable.
Some projects, such as HXC 2001, allows a direct replacement of the floppy drive (a Canon MD-221) by a SD card.
However, any floppy drive emulator will have to deal with timing delays generated by the floppy disk controller (FDC);
these timing slow down the reading/writing process.

This project intends to replace not only the floppy disk, but the FDC (Floppy Disk Controller) as well.
By doing so, the board will talk directly with the main CPU in an handshake protocol.
It also intend to use the QX1's keyboard and LCD to select and display the current virtual disk (99 disks on a 128 Mb SD).

The board is based on an Arduino Mini, a SD card reader and a few logic gates.

Virtual Diskette File Format

// Track 00 to 79: 5 sector * 2 sides / track = 800 datablocks of 1024 bytes
// Track 80 to 159: 9 sector * 2 sides / track = 1422 datablocks of 512 bytes
// CRC: 2444 bytes (2 bytes per datablock)

Interesting links
http://www.nongnu.org/avr-libc/user-manual/FAQ.html
